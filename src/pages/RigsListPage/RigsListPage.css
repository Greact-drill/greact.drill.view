/* src/pages/RigsListPage.css (Финальная коррекция: Устранение границ и плавное размытие) */

:root {
    --status-ok-base-bright: #34D399;   
    --status-error-base-bright: #F87171; 
    --status-ok-dark: #064E3B;   
    --status-error-dark: #7F1D1D; 
    --card-default-bg: #334155;
    --card-default-border: #475569;
    --primary-color: #3B82F6; 
}

.rigs-list-page {
    position: relative; 
    overflow: hidden; /* Добавим, чтобы оверлей не вылез за края */
    /* Убедитесь, что тут нет жесткого background-color, который виден */
    background-color: transparent; 
}
.rigs-list-page::after {
    content: "";
    position: fixed; /* Фиксируем оверлей, как и видео */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #000000; /* Чистый черный цвет */
    opacity: 0.4; /* Уровень затемнения. НАСТРОЙТЕ ЭТОТ ПАРАМЕТР! 
                     (0.3 для легкого, 0.5 для среднего, 0.7 для сильного затемнения) */
    z-index: -9; /* Размещаем поверх видео (-10), но под контентом (>= 0) */
}


.content-wrapper {
    padding: 2rem; 
}

.rigs-list {
    display: flex !important; 
    gap: 20px !important;
    width: 100% !important;
    padding: 0 !important; 
}

.rigs-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)) !important; 
    /* Увеличиваем отступы */
    gap: 30px !important; 
    flex-grow: 1; 
    padding: 0;
}


.rig-card {
     /* НА ЭТО: Используем rgba с прозрачностью 0.85 (15% прозрачности). Настройте по вкусу. */
    background-color: rgba(51, 65, 85, 0.125) !important; /* #334155 в RGB: 51, 65, 85 */

    /* УБИРАЕМ ТЕНЬ: Тень уже не нужна, т.к. прозрачность создает достаточный эффект глубины */
    /* box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); */
    border: 1px solid rgba(71, 85, 105, 0.8) !important; /* Граница тоже должна быть прозрачной */
    color: var(--text-color, #f1f5f9) !important;
    
    /* КЛЮЧЕВОЕ ИСПРАВЛЕНИЕ: Гарантированное удаление всех границ */
    border: none !important;
    
    padding: 30px 25px !important; 
    border-radius: 12px !important;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2) !important;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 35px; 
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    text-align: center;
    
    height: 430px !important; 
}

.rig-card:hover {
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6) !important; 
    transform: translateY(-4px); 
}

.rig-card img {
    width: 320px !important; 
    height: 320px !important;
    
    opacity: 1 !important;
    transition: transform 0.2s; 
    
    /* ЭФФЕКТ РАЗМЫВАНИЯ/СВЕЧЕНИЯ */
    /* Уменьшаем плотный центр (35%) и даем широкий переход к прозрачности (75%) */
    mask-image: radial-gradient(circle, white 35%, transparent 75%) !important; 
    -webkit-mask-image: radial-gradient(circle, white 35%, transparent 75%) !important;

    /* Блокировка функций браузера */
    pointer-events: none !important;
    user-select: none !important;
}


.rig-name {
    font-size: 1.5rem !important; 
    font-weight: 600 !important;
    color: var(--text-color, #f1f5f9) !important; 
}

.rig-card:hover .rig-card img {
    transform: scale(0.98); 
}

/* ------------------------------------------------------------------ */
/* Стили градиентов и активных состояний */
/* ------------------------------------------------------------------ */

.rig-card.ok {
    background: linear-gradient(
        135deg, 
        /* Начальный цвет: делаем его прозрачным, но сохраняем яркость */
        rgba(21, 255, 0, 0.307) 0%, /* #34D399 с прозрачностью */
        /* Конечный цвет: делаем его прозрачным фоновым цветом */
        rgba(51, 65, 85, 0.85) 100% 
    ) !important;
    border-color: transparent !important;
}

.rig-card.bad {
    background: linear-gradient(
        135deg, 
        /* Начальный цвет: делаем его прозрачным, но сохраняем яркость */
        rgba(247, 0, 0, 0.307) 0%, /* #F87171 с прозрачностью */
        /* Конечный цвет: делаем его прозрачным фоновым цветом */
        rgba(51, 65, 85, 0.85) 100% 
    ) !important;
    border-color: transparent !important;
}

/* Активная карточка */
.rig-card.active {
    border-color: transparent !important; 
    /* ИСПРАВЛЕНИЕ: !important применяется один раз к объединенному значению */
    box-shadow: 
        0 0 0 4px var(--primary-color), 
        0 8px 20px rgba(0, 0, 0, 0.5) 
    !important;
}

/* Активная карточка OK */
.rig-card.ok.active {
    border-color: transparent !important;
    /* ИСПРАВЛЕНИЕ */
    box-shadow: 
        0 0 0 4px var(--status-ok-base-bright), 
        0 8px 20px rgba(0, 0, 0, 0.5) 
    !important;
}

/* Активная карточка BAD */
.rig-card.bad.active {
    border-color: transparent !important; 
    /* ИСПРАВЛЕНИЕ */
    box-shadow: 
        0 0 0 4px var(--status-error-base-bright), 
        0 8px 20px rgba(0, 0, 0, 0.5) 
    !important;
}


/* ------------------------------------------------------------------ */
/* Стили боковой панели */
/* ------------------------------------------------------------------ */

.rig-status-panel {
    /* ... (Размеры, transition и overflow остаются прежними) ... */
    
    /* Установим максимально темный, однородный фон */
    /* КОРРЕКЦИЯ: Глубокий, фиолетово-синий градиент */
        /* КОРРЕКЦИЯ: Глубокий, ФИОЛЕТОВО-СИНИЙ ГРАДИЕНТ (Indigo/Violet) */
        /* КОРРЕКЦИЯ: Глубокий, ФИОЛЕТОВО-СИНИЙ ПОЛУПРОЗРАЧНЫЙ ГРАДИЕНТ */
    background: linear-gradient(
        145deg, 
        /* Начинаем с яркого индиго (Indigo 600) с прозрачностью 0.95 */
        rgba(78, 70, 229, 0.059) 0%, /* #4f46e5 в RGB: 79, 70, 229 */
        /* Заканчиваем глубоким темным фиолетово-синим (Slate 900) с прозрачностью 0.95 */
        rgba(30, 41, 59, 0.95) 100% /* #1e293b в RGB: 30, 41, 59 */
    ) !important;
    
        backdrop-filter: blur(8px); /* Размытие на 8 пикселей. Настройте по вкусу. */
    -webkit-backdrop-filter: blur(8px); /* Для поддержки Safari */

    /* Усилим тень, чтобы панель выделялась */
    top: var(--topbar-height, 0); /* Начинаем от TopBar или от 0 */
    height: calc(100vh - var(--topbar-height, 0)); /* Высота - 100vh минус высота TopBar */
    bottom: 0; /* Гарантируем, что панель доходит до низа */
    
    /* Добавляем небольшой внутренний отступ сверху/снизу для контента */
    padding-top: 20px !important; 
    padding-bottom: 20px !important;
    
    /* Сохраняем вертикальный flex для корректного размещения прокрутки */
    display: flex;
    flex-direction: column; 
    color: var(--text-color, #f1f5f9) !important;

    /* Закругляем только левые углы */
    border-radius: 8px 0 0 8px !important; 
    
    /* Усилим тень, чтобы панель выделялась */
    box-shadow: -10px 0 40px rgba(0, 0, 0, 0.7) !important;
    
    /* Гарантированное удаление границ */
    border: none !important; 
    
    /* Добавляем внутренние стили для компоновки */
    display: flex;
    flex-direction: column;
    position: relative; 
}
/* Класс, который добавляется при открытии панели */
.rig-status-panel.open {
    /* Убираем padding из open, так как он теперь в основном блоке, 
       но оставляем горизонтальный. */
    width: 500px !important; 
    padding: 20px !important; /* Общий padding для открытого состояния */
    
    /* Отступы, которые были в open, переместились в .rig-status-panel */
}
/* Стили для заголовка-ссылки (название буровой) */
.rig-title-link {
    font-size: 1.8rem !important;
    font-weight: 700 !important;
    display: flex;
    align-items: center;
    margin-bottom: 25px;
    text-decoration: none !important; /* Убираем подчеркивание */
    transition: color 0.2s;
}
.rig-title-link.ok { color: var(--status-ok-base-bright) !important; }
.rig-title-link.bad { color: var(--status-error-base-bright) !important; }
.rig-title-link:hover { opacity: 0.8; }

/* Стили для кнопки закрытия */
.rig-status-panel .close-panel-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    z-index: 10;
    color: #fff !important;
    /* Полупрозрачный фон для кнопки */
    background: rgba(255, 255, 255, 0.1) !important;
    border: none !important;
}

.edge-status-container {
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1); 
    
    /* ПОЗВОЛЯЕМ КОНТЕНТУ ЗАНИМАТЬ ВСЕ СВОБОДНОЕ МЕСТО И СКРОЛЛИТЬСЯ */
    flex-grow: 1; /* Занимает все доступное место */
    overflow-y: auto; /* Включаем вертикальную прокрутку, если контент не влезает */
}


.background-video {
    position: fixed; 
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    transform: scaleX(-1); 

    /* КРИТИЧНО: УДАЛЯЕМ/ОБНУЛЯЕМ ЭФФЕКТЫ, ВЫЗЫВАЮЩИЕ "СЕРАЯ ПЛЕНКА" */
    opacity: 1 !important; /* Видео полностью непрозрачно */
    filter: none !important; /* Убираем фильтр яркости/контраста */
    
    /* Сохраняем z-index ниже оверлея */
    z-index: -10; 
    object-fit: cover;
}

/* 💡 НОВЫЙ СТИЛЬ: Модификатор для булевых тегов */
.tag-card-small.tag-card-bool {
    min-height: 38px; /* Значительно меньше высота */
    display: flex; 
    align-items: center; /* Выравнивание названия по вертикали */
    justify-content: center; /* Выравнивание названия по горизонтали */
}

/* Переопределяем стиль названия внутри булевой карточки */
.tag-card-small.tag-card-bool .tag-card-title-small {
    margin-bottom: 0; /* Убираем отступ */
    opacity: 1; /* Полная непрозрачность */
    font-size: 0.9em; /* Немного крупнее, если оно единственное */
    font-weight: 600;
    text-align: center; /* Центрируем текст */
    padding: 0 5px; /* Небольшой отступ по бокам, чтобы текст не прилипал */
}

/* Скрываем элементы, которые могут остаться от предыдущего рендеринга, если JSX ошибется */
.tag-card-small.tag-card-bool .tag-card-value-small,
.tag-card-small.tag-card-bool .tag-card-unit-small {
    display: none;
}